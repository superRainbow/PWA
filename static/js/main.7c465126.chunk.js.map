{"version":3,"sources":["components/modal.js","utils/checkUserAgent.js","utils/useLocalStorage.js","components/addToHomescreenPrompt.js","components/addPushPrompt.js","components/notificationBtn.js","components/app.js","serviceWorker.js","index.js","assets/images/rainbow.png"],"names":["Overlay","styled","motion","div","ModalContainer","CloseButton","svg","modalVariant","initial","opacity","isOpen","exit","containerVariant","top","transition","type","Modal","handleClose","children","isShow","isShowClose","animate","variants","onClick","xmlns","viewBox","x1","y1","x2","y2","fill","stroke","strokeLinecap","strokeMiterlimit","strokeWidth","defaultProps","checkUserAgent","uaString","window","navigator","userAgent","toLowerCase","isChrome","test","isExplorer","isFirefox","isSafari","isOpera","isEdgeDesktop","isEdgeiOS","isEdgeAndroid","isIOS","isMobile","useLocalStorage","key","initialValue","useState","item","localStorage","getItem","JSON","parse","err","console","error","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","PopContent","useAddToHomescreenPrompt","props","isPWA","matchMedia","matches","isInstalled","setInstalled","deferredPrompt","setPrompt","index","useEffect","ready","e","log","preventDefault","addEventListener","removeEventListener","cloeModal","onChange","promptToInstall","prompt","userChoice","then","choiceResult","outcome","className","onKeyUp","addPushPrompt","isGranted","Notification","permission","addPush","requestPermission","status","notificationBtn","push","options","body","icon","rainbow","serviceWorker","sw","showNotification","App","AppHeader","AppLink","a","attrs","href","url","target","rel","ShakeSlow","keyframes","RainbowIcon","img","src","alt","text","setIndex","handleIndex","newValue","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","fetch","headers","response","contentType","get","indexOf","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.7c465126.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst Overlay = styled(motion.div)`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 10;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgba(0, 0, 0, 0.3);\n`;\nconst ModalContainer = styled(motion.div)`\n\tposition: absolute;\n\ttop: 20%;\n\tleft: 50%;\n\tdisplay: grid;\n\twidth: clamp(300px, 50vw, 800px);\n\tmin-height: 20px;\n\tpadding: 20px;\n\tborder-radius: 10px;\n\tbackground: #fff;\n\ttransform: translate(-50%, -50%);\n`;\nconst CloseButton = styled.svg`\n\twidth: 20px;\n\theight: 20px;\n\tposition: absolute;\n\tright: 18px;\n\ttop: 18px;\n\tcursor: pointer;\n`;\n\nconst modalVariant = {\n\tinitial: { opacity: 0 },\n\tisOpen: { opacity: 1 },\n\texit: { opacity: 0 },\n};\nconst containerVariant = {\n\tinitial: { top: '-50%', transition: { type: 'spring' } },\n\tisOpen: { top: '20%' },\n\texit: { top: '-50%' },\n};\nconst Modal = ({ handleClose, children, isShow, isShowClose }) => {\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{isShow && (\n\t\t\t\t<Overlay initial=\"initial\" animate=\"isOpen\" exit=\"exit\" variants={modalVariant}>\n\t\t\t\t\t<ModalContainer variants={containerVariant}>\n\t\t\t\t\t\t{isShowClose && (\n\t\t\t\t\t\t\t<CloseButton\n\t\t\t\t\t\t\t\tisShow={isShowClose}\n\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20.39 20.39\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<title>close</title>\n\t\t\t\t\t\t\t\t<line\n\t\t\t\t\t\t\t\t\tx1=\"19.39\"\n\t\t\t\t\t\t\t\t\ty1=\"19.39\"\n\t\t\t\t\t\t\t\t\tx2=\"1\"\n\t\t\t\t\t\t\t\t\ty2=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tstroke=\"#5c3aff\"\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<line\n\t\t\t\t\t\t\t\t\tx1=\"1\"\n\t\t\t\t\t\t\t\t\ty1=\"19.39\"\n\t\t\t\t\t\t\t\t\tx2=\"19.39\"\n\t\t\t\t\t\t\t\t\ty2=\"1\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tstroke=\"#5c3aff\"\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\tstrokeMiterlimit=\"10\"\n\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</CloseButton>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</ModalContainer>\n\t\t\t\t</Overlay>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n\n// 2. Modal 設定 propTypes\nModal.propTypes = {\n\tisShowClose: PropTypes.bool,\n\tisShow: PropTypes.bool.isRequired,\n\tchildren: PropTypes.element.isRequired,\n\thandleClose: PropTypes.func.isRequired,\n};\n\nModal.defaultProps = {\n\tisShowClose: false,\n};\n\nexport default Modal;\n","const checkUserAgent = () => {\n\tconst uaString = window.navigator.userAgent.toLowerCase();\n\tlet isChrome = /chrome/.test(uaString);\n\tconst isExplorer = /msie/.test(uaString);\n\tconst isFirefox = /firefox/.test(uaString);\n\tlet isSafari = /safari/.test(uaString);\n\tconst isOpera = /opr/.test(uaString);\n\tconst isEdgeDesktop = /edge/.test(uaString);\n\tconst isEdgeiOS = /edgios/.test(uaString);\n\tconst isEdgeAndroid = /edga/.test(uaString);\n\n\tconst isIOS = /ipad|iphone|ipod/.test(uaString);\n\tconst isMobile = /mobile/.test(uaString);\n\n\tif (isChrome && isSafari) {\n\t\tisSafari = false;\n\t}\n\tif (isChrome && (isEdgeDesktop || isEdgeiOS || isEdgeAndroid)) {\n\t\tisChrome = false;\n\t}\n\tif (isSafari && (isEdgeDesktop || isEdgeiOS || isEdgeAndroid)) {\n\t\tisSafari = false;\n\t}\n\tif (isChrome && isOpera) {\n\t\tisChrome = false;\n\t}\n\n\treturn {\n\t\tisChrome,\n\t\tisExplorer,\n\t\tisFirefox,\n\t\tisSafari,\n\t\tisOpera,\n\t\tisEdgeDesktop,\n\t\tisEdgeiOS,\n\t\tisEdgeAndroid,\n\t\tisIOS,\n\t\tisMobile,\n\t};\n};\n\nexport default checkUserAgent;\n","import { useState } from 'react';\n\nconst useLocalStorage = (key, initialValue) => {\n\tconst [storedValue, setStoredValue] = useState(() => {\n\t\ttry {\n\t\t\tconst item = window.localStorage.getItem(key);\n\t\t\treturn item ? JSON.parse(item) : initialValue;\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\treturn initialValue;\n\t\t}\n\t});\n\n\tconst setValue = (value) => {\n\t\ttry {\n\t\t\tconst valueToStore = value instanceof Function ? value(storedValue) : value;\n\t\t\tsetStoredValue(valueToStore);\n\t\t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore));\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn [storedValue, setValue];\n};\n\nexport default useLocalStorage;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Modal from './modal';\nimport checkUserAgent from '../utils/checkUserAgent';\nimport useLocalStorage from '../utils/useLocalStorage';\n\nconst PopContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\n\th2 {\n\t\tfont-weight: bolder;\n\t}\n`;\n\nconst useAddToHomescreenPrompt = (props) => {\n\t// isPWA：只能檢查是否是在 PWA 的 APP 模式下，無法在網頁上判斷是否安裝了 PWA\n\tconst isPWA = window.matchMedia('(display-mode: standalone)').matches;\n\t// 確認 localStorage 是否有 isInstalled 欄位\n\tconst [isInstalled, setInstalled] = useLocalStorage('isInstalled');\n\tconst { isIOS, isSafari } = checkUserAgent();\n\tconst [deferredPrompt, setPrompt] = useState(null);\n\tconst { index } = props;\n\tconst isOpen = index === 0;\n\n\tuseEffect(() => {\n\t\tconst ready = (e) => {\n\t\t\tconsole.log('安裝視窗跳出來前 阻止它!!');\n\t\t\te.preventDefault();\n\t\t\tsetPrompt(e);\n\t\t\treturn false;\n\t\t};\n\t\twindow.addEventListener('beforeinstallprompt', ready);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('beforeinstallprompt', ready);\n\t\t};\n\t}, []);\n\n\tconst cloeModal = () => {\n\t\tprops.onChange(1);\n\t};\n\n\tconst promptToInstall = () => {\n\t\tconsole.log('deferredPrompt', deferredPrompt);\n\t\tif (deferredPrompt) {\n\t\t\tdeferredPrompt.prompt();\n\t\t\tdeferredPrompt.userChoice.then((choiceResult) => {\n\t\t\t\tconsole.log(choiceResult.outcome);\n\t\t\t\tif (choiceResult.outcome === 'dismissed') {\n\t\t\t\t\tconsole.log('使用者取消安裝');\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('使用者安裝');\n\t\t\t\t\tsetInstalled(true);\n\t\t\t\t}\n\t\t\t\tcloeModal();\n\t\t\t\tsetPrompt(null);\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t/* beforeinstallprompt 在 ios 與 Safari 上不支援 (https://caniuse.com/mdn-api_beforeinstallpromptevent) */\n\t\t<Modal\n\t\t\tisShow={!isInstalled && !(isIOS || isSafari || isPWA) && isOpen}\n\t\t\tisShowClose\n\t\t\thandleClose={cloeModal}\n\t\t>\n\t\t\t<PopContent>\n\t\t\t\t<h2>Install As Application?</h2>\n\t\t\t\t<button className=\"add\" type=\"button\" onClick={promptToInstall} onKeyUp={promptToInstall}>\n\t\t\t\t\tAdd\n\t\t\t\t</button>\n\t\t\t</PopContent>\n\t\t</Modal>\n\t);\n};\n\nuseAddToHomescreenPrompt.propTypes = {\n\tindex: PropTypes.number,\n\tonChange: PropTypes.func,\n};\n\nuseAddToHomescreenPrompt.defaultProps = {\n\tindex: 0,\n\tonChange: {},\n};\n\nexport default useAddToHomescreenPrompt;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Modal from './modal';\n\nconst PopContent = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\n\th2 {\n\t\tfont-weight: bolder;\n\t}\n`;\n\nconst addPushPrompt = (props) => {\n\tconst { index } = props;\n\tconst isGranted = 'Notification' in window && Notification.permission === 'granted';\n\tconst isShow = 'serviceWorker' in navigator && index === 1 && !isGranted;\n\n\tconst cloeModal = () => {\n\t\tprops.onChange(2);\n\t};\n\n\tconst displayNotification = () => {\n\t\treturn new Notification('訂閱成功！！！');\n\t};\n\n\tconst addPush = () => {\n\t\tconsole.log('isGranted', isGranted);\n\t\tNotification.requestPermission((status) => {\n\t\t\tconsole.log('User Choice', status);\n\t\t\t// 點選「允許」：granted\n\t\t\t// 點選「封鎖」：denied\n\t\t\tif (status !== 'granted') {\n\t\t\t\tconsole.log('推播允許被拒絕了!');\n\t\t\t} else {\n\t\t\t\tdisplayNotification();\n\t\t\t}\n\t\t\tcloeModal();\n\t\t});\n\t};\n\n\treturn (\n\t\t/* beforeinstallprompt 在 ios 與 Safari 上不支援 (https://caniuse.com/mdn-api_beforeinstallpromptevent) */\n\t\t<Modal isShow={isShow} isShowClose handleClose={cloeModal}>\n\t\t\t<PopContent>\n\t\t\t\t<h2>接收推播嗎？</h2>\n\t\t\t\t<button className=\"add\" type=\"button\" onClick={addPush} onKeyUp={addPush}>\n\t\t\t\t\tAdd\n\t\t\t\t</button>\n\t\t\t</PopContent>\n\t\t</Modal>\n\t);\n};\n\naddPushPrompt.propTypes = {\n\tindex: PropTypes.number,\n\tonChange: PropTypes.func,\n};\n\naddPushPrompt.defaultProps = {\n\tindex: 0,\n\tonChange: {},\n};\n\nexport default addPushPrompt;\n","import React from 'react';\nimport rainbow from '../assets/images/rainbow.png';\n\nconst notificationBtn = () => {\n\tconst isShow = 'Notification' in window && Notification.permission === 'granted';\n\tconst push = () => {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\tconst options = {\n\t\t\t\tbody: 'Service Worker 推播測試',\n\t\t\t\ticon: rainbow,\n\t\t\t};\n\t\t\tnavigator.serviceWorker.ready.then((sw) => {\n\t\t\t\tsw.showNotification('Rainbow PWA', options);\n\t\t\t});\n\t\t}\n\t};\n\treturn (\n\t\tisShow && (\n\t\t\t<button className=\"push\" type=\"button\" onClick={push} onKeyUp={push}>\n\t\t\t\t透過 Service Worker 發通知\n\t\t\t</button>\n\t\t)\n\t);\n};\n\nexport default notificationBtn;\n","import React, { useState } from 'react';\nimport { Online, Offline } from 'react-detect-offline';\nimport styled, { keyframes } from 'styled-components';\nimport UseAddToHomescreenPrompt from './addToHomescreenPrompt';\nimport AddPushPrompt from './addPushPrompt';\nimport NotificationBtn from './notificationBtn';\nimport rainbow from '../assets/images/rainbow.png';\n\nconst App = styled.div`\n\ttext-align: center;\n`;\n\nconst AppHeader = styled.div`\n\talign-items: center;\n\tbackground-color: #4fc6e1;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: calc(10px + 2vmin);\n\tjustify-content: center;\n\tmin-height: 100vh;\n`;\n\nconst AppLink = styled.a.attrs(({ url }) => ({\n\thref: url,\n\ttarget: '_blank',\n\trel: 'noopener noreferrer',\n}))`\n\tcolor: #61dafb;\n`;\n\nconst ShakeSlow = keyframes`\n\t2% {\n\t\ttransform: translate(0, -7px) rotate(2.5deg);\n\t}\n\n\t4% {\n\t\ttransform: translate(6px, 3px) rotate(-0.5deg);\n\t}\n\n\t6% {\n\t\ttransform: translate(6px, -5px) rotate(0.5deg);\n\t}\n\n\t8% {\n\t\ttransform: translate(3px, 3px) rotate(-1.5deg);\n\t}\n\n\t10% {\n\t\ttransform: translate(-4px, 5px) rotate(1.5deg);\n\t}\n\n\t12% {\n\t\ttransform: translate(2px, 7px) rotate(2.5deg);\n\t}\n\n\t14% {\n\t\ttransform: translate(0, 6px) rotate(-1.5deg);\n\t}\n\n\t16% {\n\t\ttransform: translate(-9px, 5px) rotate(-2.5deg);\n\t}\n\n\t18% {\n\t\ttransform: translate(4px, -8px) rotate(-0.5deg);\n\t}\n\n\t20% {\n\t\ttransform: translate(2px, 9px) rotate(3.5deg);\n\t}\n\n\t22% {\n\t\ttransform: translate(-5px, 1px) rotate(-2.5deg);\n\t}\n\n\t24% {\n\t\ttransform: translate(-2px, -8px) rotate(0.5deg);\n\t}\n\n\t26% {\n\t\ttransform: translate(4px, -2px) rotate(-0.5deg);\n\t}\n\n\t28% {\n\t\ttransform: translate(-4px, 9px) rotate(1.5deg);\n\t}\n\n\t30% {\n\t\ttransform: translate(-4px, -3px) rotate(3.5deg);\n\t}\n\n\t32% {\n\t\ttransform: translate(-2px, 6px) rotate(-2.5deg);\n\t}\n\n\t34% {\n\t\ttransform: translate(4px, -4px) rotate(-0.5deg);\n\t}\n\n\t36% {\n\t\ttransform: translate(-1px, 6px) rotate(0.5deg);\n\t}\n\n\t38% {\n\t\ttransform: translate(8px, 8px) rotate(1.5deg);\n\t}\n\n\t40% {\n\t\ttransform: translate(9px, -2px) rotate(3.5deg);\n\t}\n\n\t42% {\n\t\ttransform: translate(-2px, -9px) rotate(0.5deg);\n\t}\n\n\t44% {\n\t\ttransform: translate(-1px, 10px) rotate(-1.5deg);\n\t}\n\n\t46% {\n\t\ttransform: translate(-1px, 1px) rotate(-0.5deg);\n\t}\n\n\t48% {\n\t\ttransform: translate(6px, -8px) rotate(2.5deg);\n\t}\n\n\t50% {\n\t\ttransform: translate(-1px, -7px) rotate(-1.5deg);\n\t}\n\n\t52% {\n\t\ttransform: translate(0, 1px) rotate(-1.5deg);\n\t}\n\n\t54% {\n\t\ttransform: translate(1px, -8px) rotate(-2.5deg);\n\t}\n\n\t56% {\n\t\ttransform: translate(-4px, 2px) rotate(1.5deg);\n\t}\n\n\t58% {\n\t\ttransform: translate(10px, -7px) rotate(-2.5deg);\n\t}\n\n\t60% {\n\t\ttransform: translate(-2px, -4px) rotate(-1.5deg);\n\t}\n\n\t62% {\n\t\ttransform: translate(-3px, 3px) rotate(1.5deg);\n\t}\n\n\t64% {\n\t\ttransform: translate(8px, 2px) rotate(-1.5deg);\n\t}\n\n\t66% {\n\t\ttransform: translate(-4px, -1px) rotate(1.5deg);\n\t}\n\n\t68% {\n\t\ttransform: translate(-1px, -2px) rotate(-1.5deg);\n\t}\n\n\t70% {\n\t\ttransform: translate(8px, 8px) rotate(0.5deg);\n\t}\n\n\t72% {\n\t\ttransform: translate(-8px, -3px) rotate(-2.5deg);\n\t}\n\n\t74% {\n\t\ttransform: translate(6px, 5px) rotate(0.5deg);\n\t}\n\n\t76% {\n\t\ttransform: translate(4px, -9px) rotate(1.5deg);\n\t}\n\n\t78% {\n\t\ttransform: translate(-2px, -6px) rotate(3.5deg);\n\t}\n\n\t80% {\n\t\ttransform: translate(1px, 0) rotate(1.5deg);\n\t}\n\n\t82% {\n\t\ttransform: translate(-4px, 6px) rotate(-2.5deg);\n\t}\n\n\t84% {\n\t\ttransform: translate(-4px, -3px) rotate(1.5deg);\n\t}\n\n\t86% {\n\t\ttransform: translate(7px, 10px) rotate(2.5deg);\n\t}\n\n\t88% {\n\t\ttransform: translate(-3px, -2px) rotate(1.5deg);\n\t}\n\n\t90% {\n\t\ttransform: translate(8px, -3px) rotate(3.5deg);\n\t}\n\n\t92% {\n\t\ttransform: translate(0, 3px) rotate(1.5deg);\n\t}\n\n\t94% {\n\t\ttransform: translate(5px, -5px) rotate(-2.5deg);\n\t}\n\n\t96% {\n\t\ttransform: translate(7px, -2px) rotate(-0.5deg);\n\t}\n\n\t98% {\n\t\ttransform: translate(-6px, 0) rotate(3.5deg);\n\t}\n\n\t0%,100% {\n\t\ttransform: translate(0, 0) rotate(0);\n\t}\n`;\n\nconst RainbowIcon = styled.img.attrs(({ url, text }) => ({\n\tsrc: url,\n\talt: text,\n}))`\n\theight: 40vmin;\n\tmargin-bottom: 50px;\n\tpointer-events: none;\n\tanimation: ${ShakeSlow} infinite 5s ease-in-out;\n`;\n\nexport default () => {\n\tconst [index, setIndex] = useState(0);\n\tconst handleIndex = (newValue) => {\n\t\tsetIndex(newValue);\n\t};\n\treturn (\n\t\t<App>\n\t\t\t<UseAddToHomescreenPrompt index={index} onChange={handleIndex} />\n\t\t\t<AddPushPrompt index={index} onChange={handleIndex} />\n\t\t\t<AppHeader>\n\t\t\t\t<RainbowIcon url={rainbow} text=\"rainbow\" />\n\t\t\t\t<Online>有網路時會顯示的內容</Online>\n\t\t\t\t<Offline>離線時會顯示的內容</Offline>\n\t\t\t\t<NotificationBtn />\n\t\t\t\t<p>\n\t\t\t\t\tEdit <code>src/App.js</code> and save to reload.\n\t\t\t\t</p>\n\t\t\t\t<AppLink url=\"https://reactjs.org\">Learn React</AppLink>\n\t\t\t</AppHeader>\n\t\t</App>\n\t);\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA',\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/rainbow.27bc25b7.png\";"],"sourceRoot":""}